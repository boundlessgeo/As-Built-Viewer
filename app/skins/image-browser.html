<% extends ./base.html %>
<% subskin extrahead %>
    <title>As-Built Image Browser</title>
    <!-- OpenLayers resources -->
    <link rel="stylesheet" type="text/css" href="externals/openlayers/theme/default/style.css" />
    <script type="text/javascript" src="script/OpenLayers.js"></script>

    <!-- GeoExt resources -->
    <link rel="stylesheet" type="text/css" href="externals/geoext/resources/css/popup.css" />
    <link rel="stylesheet" type="text/css" href="externals/geoext/resources/css/layerlegend.css" />
    <link rel="stylesheet" type="text/css" href="externals/geoext/resources/css/gxtheme-gray.css" />
    <script type="text/javascript" src="script/GeoExt.js"></script> 

    <!-- gxp resources -->
    <link rel="stylesheet" type="text/css" href="externals/gxp/src/theme/all.css" />
    <script type="text/javascript" src="script/gxp.js"></script> 
        
    <!-- proj4js resources -->
    <!--
    <script type="text/javascript" src="externals/proj4js/lib/proj4js-compressed.js"></script>
    -->

    <!-- app resources -->
    <link rel="stylesheet" type="text/css" href="theme/app/style.css" />
    <!--[if IE]><link rel="stylesheet" type="text/css" href="theme/app/ie.css"/><![endif]-->        
    <script type="text/javascript">
        Ext.BLANK_IMAGE_URL = "externals/openlayers/theme/default/img/blank.gif";
        OpenLayers.ImgPath = "externals/openlayers/img/";
        OpenLayers.Layer.WMS.prototype.DEFAULT_PARAMS.transparent = true;
        OpenLayers.DOTS_PER_INCH = 25.4 / 0.28;
        var app = new gxp.Viewer({
            portalItems: [{
                region: "center",
                layout: "border",
                border: false,
                tbar: {
                    id: "paneltbar",
                    items: [{
                        iconCls: "icon-geoexplorer",
                        disabled: true
                    }, "As-Built Viewer", "-", "-"]
                },
                items: [{
                    region: "west",
                    border: false,
                    layout: "accordion",
                    split: true,
                    collapsible: true,
                    collapseMode: "mini",
                    header: false,
                    defaults: {
                        border: false
                    },
                    layoutConfig: {
                        animate: true,
                        fill: true
                    },
                    width: 210,
                    items: [
                        {
                            id: "tree",
                            title: "Layers"
                        }, {
                            id: "search",
                            title: "Search"
                        }
                    ]
                }, "map"]
            }],
            tools: [
                {
                    ptype: "gxp_layertree",
                    outputConfig: {
                        id: "layertree",
                        tbar: []
                    },
                    outputTarget: "tree",
                }, {
                    ptype: "gxp_addlayers",
                    actionTarget: "layertree.tbar"
                }, {
                    ptype: "gxp_removelayer",
                    actionTarget: ["layertree.tbar", "layertree.contextMenu"]
                }, {
                    ptype: "gxp_layerproperties",
                    actionTarget: ["layertree.tbar", "layertree.contextMenu"]
                }, {
                    ptype: "gxp_zoomtolayerextent",
                    actionTarget: {target: "layertree.contextMenu", index: 0}
                }, {
                    ptype: "gxp_zoomtoextent",
                    actionTarget: {target: "paneltbar", index: 3}
                }, {
                    ptype: "gxp_navigationhistory",
                    actionTarget: {target: "paneltbar", index: 4}
                }, {
                    ptype: "gxp_measure",
                    actionTarget: {target: "paneltbar", index: 6},
                    toggleGroup: "main"
                }, {
                    ptype: "gxp_wmsgetfeatureinfo",
                    actionTarget: "paneltbar",
                    toggleGroup: "main"
                }, {
                    ptype: "gxp_googlegeocoder",
                    outputTarget: "paneltbar",
                    outputConfig: {
                        emptyText: "Search for a location ...",
                        listEmptyText: "- no matches -"
                    }
                }
            ],
            mapItems: [{
                xtype: "gx_zoomslider",
                vertical: true,
                height: 100
            }],
            proxy: "proxy/?url=",
            defaultSourceType: "gxp_wmssource",
            sources: {
                osm: {
                    ptype: "gxp_osmsource"
                }
            },
            map: {
                id: "map",
                region: "center",
                projection: "EPSG:900913",
                units: "m",
                numZoomLevels: 21,
                maxResolution: 156543.03390625,
                maxExtent: [
                    -20037508.34, -20037508.34,
                    20037508.34, 20037508.34
                ],
                extent: [-13650159, 4534735, -13609227, 4554724],
                layers: [{
                    source: "osm",
                    name: "mapnik",
                    title: "OpenStreetMap",
                    group: "background"
                }],
                center: [-13629218, 4545403],
                zoom: 13
            }
        });

    </script>
